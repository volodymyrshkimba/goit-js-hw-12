{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createMarkup = arr => {\n\treturn arr.map(imgObj => {\n\tconst { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = imgObj;\n\treturn `<li class=\"item\">\n\t\t\t\t\t<a class=\"item-link\" href=\"${largeImageURL}\"><img class=\"item-img\" src=\"${webformatURL}\" alt=\"\" title=\"${tags}\" /></a>\n\t\t\t\t\t<ul class=\"item-desc\">\n\t\t\t\t\t\t\t<li>Likes\n\t\t\t\t\t\t\t\t<p>${likes}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Views\n\t\t\t\t\t\t\t\t<p>${views}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Comments\n\t\t\t\t\t\t\t\t<p>${comments}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>Downloads\n\t\t\t\t\t\t\t\t<p>${downloads}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>`\n}).join('');\n}","import axios from \"axios\";\n\nexport const fetchByUserKey = (userKey, page) => {\n\treturn axios.get('https://pixabay.com/api/', {\n\t\tparams: {\n\t\t\tkey: '45426984-94cd792edc1ba8c0f2dda7afb',\n\t\t\tq: `${userKey.trim()}`,\n\t\t\timage_type: 'photo',\n\t\t\torientation: 'horizontal',\n\t\t\tsafesearch: true,\n\t\t\tper_page: 15,\n\t\t\tpage,\n\t}\n\t});\n\n\t\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { createMarkup } from './js/render-functions';\nimport { fetchByUserKey } from './js/pixabay-api';\n\nconst formEL = document.querySelector('.search-form');\nconst galleryEL = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loaderEl = document.createElement('p');\n\nloaderEl.classList.add('loader', 'own-styles');\nconst galleryModal = new SimpleLightbox('.gallery a');\n\nlet page = 1;\nlet userKeywordForLoadMore;\nlet totalPages;\n\nconst onFormElSubmit = async event => {\n\tevent.preventDefault();\t\n\tconst userKeyword = event.target.elements.user_keyword.value;\n\tif (userKeyword.trim() === '') {\n\t\treturn;\n\t}\n\tuserKeywordForLoadMore = userKeyword;\n\tgalleryEL.innerHTML = '';\n\tloadMoreBtn.style.display = 'none';\n\tpage = 1;\n\t\n\tformEL.after(loaderEl);\n\t\n\ttry {\n\t\tconst response = await fetchByUserKey(userKeyword, page);\n\t\tif (response.data.hits.length === 0) {\n\t\t\tiziToast.error({\n\t\t\t\tmessage: 'Sorry, there are no images matching your search query. Please try again!',\n\t\t\t\tposition: 'topRight',\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t\tgalleryEL.innerHTML = createMarkup(response.data.hits);\n\t\t\tgalleryModal.refresh();\n\t\t\tformEL.reset();\t\n\t\t\tpage += 1;\n\t\t\ttotalPages = Math.ceil(response.data.totalHits / 15)\n    \t\tif (totalPages > 1) {\n\t\t\t\t loadMoreBtn.style.display = 'block';\t\t\t\t\t \n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t} finally {\t\n\t\t\tloaderEl.remove();\n\t\t}\n}\n\nconst onLoadMoreClick = async () => {\n\ttry {\n\t\tgalleryEL.after(loaderEl);\n\t\tloadMoreBtn.style.display = 'none';\n\n\t\tconst response = await fetchByUserKey(userKeywordForLoadMore, page);\n\t\tconst markup = createMarkup(response.data.hits);\n\t\t\n\t\tloaderEl.remove();\n\t\tgalleryEL.insertAdjacentHTML('beforeend', markup);\n\t\tgalleryModal.refresh();\n\t\tloadMoreBtn.style.display = 'block';\n\t\tpage += 1;\n\t\t\n\t\tconst liEl = document.querySelector('.gallery li');\n\t\tconst liElHeight = liEl.getBoundingClientRect().height;\n\n\t\twindow.scrollBy({\n  \t\t\ttop: liElHeight * 2,\n  \t\t\tbehavior: \"smooth\",\n\t\t});\n\n\t\tif (page > totalPages) {\n\t\t\tiziToast.info({\n\t\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\t\tposition: 'topRight',\n\t\t\t});\n\t\t\tloadMoreBtn.style.display = 'none';\n\t\t} \n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\nformEL.addEventListener('submit', onFormElSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n\n"],"names":["createMarkup","arr","imgObj","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchByUserKey","userKey","page","axios","formEL","galleryEL","loadMoreBtn","loaderEl","galleryModal","SimpleLightbox","userKeywordForLoadMore","totalPages","onFormElSubmit","event","userKeyword","response","iziToast","error","onLoadMoreClick","markup","liElHeight"],"mappings":"owBAAO,MAAMA,EAAeC,GACpBA,EAAI,IAAIC,GAAU,CACzB,KAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EACjF,MAAO;AAAA,kCAC0BE,CAAa,gCAAgCD,CAAY,mBAAmBE,CAAI;AAAA;AAAA;AAAA,aAGrGC,CAAK;AAAA;AAAA;AAAA,aAGLC,CAAK;AAAA;AAAA;AAAA,aAGLC,CAAQ;AAAA;AAAA;AAAA,aAGRC,CAAS;AAAA;AAAA;AAAA,UAItB,CAAC,EAAE,KAAK,EAAE,EClBGC,EAAiB,CAACC,EAASC,IAChCC,EAAM,IAAI,2BAA4B,CAC5C,OAAQ,CACP,IAAK,qCACL,EAAG,GAAGF,EAAQ,KAAM,CAAA,GACpB,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACF,CAAE,ECNIE,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAW,SAAS,cAAc,GAAG,EAE3CA,EAAS,UAAU,IAAI,SAAU,YAAY,EAC7C,MAAMC,EAAe,IAAIC,EAAe,YAAY,EAEpD,IAAIP,EAAO,EACPQ,EACAC,EAEJ,MAAMC,EAAiB,MAAMC,GAAS,CACrCA,EAAM,eAAc,EACpB,MAAMC,EAAcD,EAAM,OAAO,SAAS,aAAa,MACvD,GAAIC,EAAY,KAAM,IAAK,GAG3B,CAAAJ,EAAyBI,EACzBT,EAAU,UAAY,GACtBC,EAAY,MAAM,QAAU,OAC5BJ,EAAO,EAEPE,EAAO,MAAMG,CAAQ,EAErB,GAAI,CACH,MAAMQ,EAAW,MAAMf,EAAec,EAAaZ,CAAI,EACvD,GAAIa,EAAS,KAAK,KAAK,SAAW,EAAG,CACpCC,EAAS,MAAM,CACd,QAAS,2EACT,SAAU,UACd,CAAI,EACD,MACA,CACAX,EAAU,UAAYf,EAAayB,EAAS,KAAK,IAAI,EACrDP,EAAa,QAAO,EACpBJ,EAAO,MAAK,EACZF,GAAQ,EACRS,EAAa,KAAK,KAAKI,EAAS,KAAK,UAAY,EAAE,EAC5CJ,EAAa,IAClBL,EAAY,MAAM,QAAU,QAE9B,OAAQW,EAAO,CACf,QAAQ,IAAIA,CAAK,CACpB,QAAY,CACTV,EAAS,OAAM,CACf,EACH,EAEMW,EAAkB,SAAY,CACnC,GAAI,CACHb,EAAU,MAAME,CAAQ,EACxBD,EAAY,MAAM,QAAU,OAE5B,MAAMS,EAAW,MAAMf,EAAeU,EAAwBR,CAAI,EAC5DiB,EAAS7B,EAAayB,EAAS,KAAK,IAAI,EAE9CR,EAAS,OAAM,EACfF,EAAU,mBAAmB,YAAac,CAAM,EAChDX,EAAa,QAAO,EACpBF,EAAY,MAAM,QAAU,QAC5BJ,GAAQ,EAGR,MAAMkB,EADO,SAAS,cAAc,aAAa,EACzB,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACb,IAAKA,EAAa,EAClB,SAAU,QACf,CAAG,EAEGlB,EAAOS,IACVK,EAAS,KAAK,CACb,QAAS,6DACT,SAAU,UACd,CAAI,EACDV,EAAY,MAAM,QAAU,OAE5B,OAAQW,EAAO,CACf,QAAQ,IAAIA,CAAK,CACjB,CACD,EAEFb,EAAO,iBAAiB,SAAUQ,CAAc,EAChDN,EAAY,iBAAiB,QAASY,CAAe"}